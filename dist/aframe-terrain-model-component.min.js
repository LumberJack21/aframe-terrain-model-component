!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");r(1),AFRAME.registerComponent("terrain-model",{schema:{DEM:{type:"asset"},texture:{type:"asset"},planeHeight:{type:"number"},planeWidth:{type:"number"},segmentsHeight:{type:"number",default:199},segmentsWidth:{type:"number",default:199},zPosition:{type:"number",default:1.5},debug:{default:!1}},multiple:!1,update:function(e){var t,r=this.el,n=this.data,i=n.debug,a=n.DEM,o=n.texture,s=new THREE.TerrainLoader,d=new THREE.PlaneGeometry(n.planeWidth,n.planeHeight,n.segmentsWidth,n.segmentsHeight),u=n.zPosition;s.load(a,function(e){for(var n=0,a=d.vertices.length;n<a;n++)d.vertices[n].z=e[n]/65535*u;var s=new THREE.TextureLoader,p=s.load(o);p.anisotropy=16;var m=new THREE.MeshLambertMaterial({map:p});t=new THREE.Mesh(d,m),t.rotation.x=-90*Math.PI/180,r.setObject3D("terrain",t),i&&(wireframe=new THREE.WireframeHelper(t,5025616),r.setObject3D("terrain-wireframe",wireframe))})},remove:function(){this.el.removeObject3D("terrain-wireframe"),this.el.removeObject3D("terrain")}})},function(e,t){THREE.TerrainLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.TerrainLoader.prototype={constructor:THREE.TerrainLoader,load:function(e,t,r,n){var i=this,a=new XMLHttpRequest;void 0!==t&&a.addEventListener("load",function(r){t(new Uint16Array(r.target.response)),i.manager.itemEnd(e)},!1),void 0!==r&&a.addEventListener("progress",function(e){r(e)},!1),void 0!==n&&a.addEventListener("error",function(e){n(e)},!1),void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),a.open("GET",e,!0),a.responseType="arraybuffer",a.send(null),i.manager.itemStart(e)},setCrossOrigin:function(e){this.crossOrigin=e}}}]);