!function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");r(1),AFRAME.registerComponent("terrain-model",{schema:{DEM:{type:"asset"},texture:{type:"asset"},alphaMap:{type:"asset"},planeHeight:{type:"number"},planeWidth:{type:"number"},segmentsHeight:{type:"number",default:199},segmentsWidth:{type:"number",default:199},zPosition:{type:"number",default:1.5},transparent:{type:"boolean",default:!1},debug:{default:!1}},multiple:!1,update:function(e){var t,r=this.el,n=this.data,a=n.debug,i=n.transparent,o=n.DEM,s=n.texture,d=n.alphaMap,p=new THREE.TerrainLoader,u=new THREE.PlaneGeometry(n.planeWidth,n.planeHeight,n.segmentsWidth,n.segmentsHeight),l=n.zPosition;p.load(o,function(e){for(var n=0,o=u.vertices.length;n<o;n++)u.vertices[n].z=e[n]/65535*l;var p=new THREE.TextureLoader,E=p.load(s);E.anisotropy=16;var f=""==d?null:(new THREE.TextureLoader).load(d),m=new THREE.MeshLambertMaterial({map:E,alphaMap:f,transparent:i||null!=f});t=new THREE.Mesh(u,m),t.rotation.x=-90*Math.PI/180,r.setObject3D("terrain",t),a&&(wireframe=new THREE.WireframeHelper(t,5025616),r.setObject3D("terrain-wireframe",wireframe))})},remove:function(){this.el.removeObject3D("terrain-wireframe"),this.el.removeObject3D("terrain")}})},function(e,t){THREE.TerrainLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.TerrainLoader.prototype={constructor:THREE.TerrainLoader,load:function(e,t,r,n){var a=this,i=new XMLHttpRequest;void 0!==t&&i.addEventListener("load",function(r){t(new Uint16Array(r.target.response)),a.manager.itemEnd(e)},!1),void 0!==r&&i.addEventListener("progress",function(e){r(e)},!1),void 0!==n&&i.addEventListener("error",function(e){n(e)},!1),void 0!==this.crossOrigin&&(i.crossOrigin=this.crossOrigin),i.open("GET",e,!0),i.responseType="arraybuffer",i.send(null),a.manager.itemStart(e)},setCrossOrigin:function(e){this.crossOrigin=e}}}]);